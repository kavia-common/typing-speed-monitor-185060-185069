{"is_source_file": true, "format": "Python", "description": "This file implements an in-memory storage system for managing typing sessions and their samples, including session creation, updating, retrieval, and deletion. It defines classes and functions to handle session data, compute typing speed (WPM), and manage thread safety.", "external_files": ["./schemas"], "external_methods": ["datetime.now", "uuid4"], "published": ["store"], "classes": [{"name": "_SessionData", "description": "Internal class representing aggregated data for a typing session, including total characters typed, total duration, sample count, and last update timestamp."}, {"name": "InMemoryTypingStore", "description": "A thread-safe class that manages multiple typing sessions, allowing creation, addition of samples, retrieval of summaries and stats, listing all sessions, and session deletion."}], "methods": [{"name": "datetime _now_utc()", "description": "Returns the current UTC datetime.", "scope": "", "scopeKind": ""}, {"name": "float _compute_wpm(total_chars: int, total_duration_ms: int)", "description": "Calculates words per minute based on total characters typed and total duration in milliseconds.", "scope": "", "scopeKind": ""}, {"name": "str create_or_get_session(self, session_id: Optional[str] = None)", "description": "Creates a new session with a unique ID or retrieves an existing one.", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"name": "SessionSummary add_samples(self, session_id: str, samples: List[TypingSample])", "description": "Adds a list of typing samples to a specified session and updates session aggregates.", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"name": "SessionSummary get_session_summary(self, session_id: str)", "description": "Retrieves an aggregated summary of a session.", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"name": "SpeedStat get_session_stats(self, session_id: str)", "description": "Calculates and returns the WPM speed stat for a session.", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"name": "List[SessionSummary] list_sessions(self)", "description": "Lists summaries of all current sessions.", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"name": "None clear_session(self, session_id: str)", "description": "Deletes a session and its data from the store.", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"name": "None __init__(self)", "scope": "InMemoryTypingStore", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, session_id: str)", "scope": "_SessionData", "scopeKind": "class", "description": "unavailable"}, {"name": "SessionSummary to_summary(self)", "scope": "_SessionData", "scopeKind": "class", "description": "unavailable"}], "calls": ["datetime.now", "uuid4", "max"], "search-terms": ["InMemoryTypingStore", "session management", "typing samples", "WPM calculation", "thread-safe store", "session aggregation", "session summary", "storage.py"], "state": 2, "file_id": 6, "knowledge_revision": 13, "git_revision": "", "ctags": [{"_type": "tag", "name": "InMemoryTypingStore", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^class InMemoryTypingStore:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_SessionData", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^class _SessionData:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def __init__(self, session_id: str):$/", "language": "Python", "kind": "member", "signature": "(self, session_id: str)", "scope": "_SessionData", "scopeKind": "class"}, {"_type": "tag", "name": "__slots__", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    __slots__ = (\"session_id\", \"total_chars\", \"total_duration_ms\", \"samples_count\", \"last_update/", "file": true, "language": "Python", "kind": "variable", "scope": "_SessionData", "scopeKind": "class"}, {"_type": "tag", "name": "_compute_wpm", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^def _compute_wpm(total_chars: int, total_duration_ms: int) -> float:$/", "language": "Python", "typeref": "typename:float", "kind": "function", "signature": "(total_chars: int, total_duration_ms: int)"}, {"_type": "tag", "name": "_now_utc", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^def _now_utc() -> datetime:$/", "language": "Python", "typeref": "typename:datetime", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "add_samples", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def add_samples(self, session_id: str, samples: List[TypingSample]) -> SessionSummary:$/", "language": "Python", "typeref": "typename:SessionSummary", "kind": "member", "signature": "(self, session_id: str, samples: List[TypingSample])", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"_type": "tag", "name": "clear_session", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def clear_session(self, session_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str)", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"_type": "tag", "name": "create_or_get_session", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def create_or_get_session(self, session_id: Optional[str] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: Optional[str] = None)", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"_type": "tag", "name": "get_session_stats", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def get_session_stats(self, session_id: str) -> SpeedStat:$/", "language": "Python", "typeref": "typename:SpeedStat", "kind": "member", "signature": "(self, session_id: str)", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"_type": "tag", "name": "get_session_summary", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def get_session_summary(self, session_id: str) -> SessionSummary:$/", "language": "Python", "typeref": "typename:SessionSummary", "kind": "member", "signature": "(self, session_id: str)", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"_type": "tag", "name": "list_sessions", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def list_sessions(self) -> List[SessionSummary]:$/", "language": "Python", "typeref": "typename:List[SessionSummary]", "kind": "member", "signature": "(self)", "scope": "InMemoryTypingStore", "scopeKind": "class"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^store = InMemoryTypingStore()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "to_summary", "path": "/home/kavia/workspace/code-generation/typing-speed-monitor-185060-185069/fastapi_backend/src/api/storage.py", "pattern": "/^    def to_summary(self) -> SessionSummary:$/", "language": "Python", "typeref": "typename:SessionSummary", "kind": "member", "signature": "(self)", "scope": "_SessionData", "scopeKind": "class"}], "hash": "bf22276a2211d4f41100e5ed2bc6dc31", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/api/storage.py", "fields": [{"name": "__slots__ = (\"session_id\", \"total_chars\", \"total_duration_ms\", \"samples_count\", \"last_update/", "scope": "_SessionData", "scopeKind": "class", "description": "unavailable"}, {"name": "store = InMemoryTypingStore()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"13": ""}]}